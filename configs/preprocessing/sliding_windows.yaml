# @package _global_


defaults:
  - override /hydra/job_logging: colorlog
  - override /hydra/hydra_logging: colorlog

sliding_windows:
  # input/output paths
  paths:
    input_folder: "data/cleaned_pretraining"
    input_pattern: "*.parquet"
    output_folder: "data/pretraining_windowed_3"
    logging_dir: "logs/sliding_windows_3"

  # reader config
  reader:
    text_key: "text" 
    id_key: "id"
    default_metadata: {}

  # tokenizer config
  tokenizer:
    name_or_path: "t5-base"

  window_config:
    target_tokens: 512        
    overlap_ratio: 0.5        # 50% overlap (256 tokens)
    output_format: "text"     # "text" or "tokens"

  # execution config
  execution:
    tasks: 75
    workers: 75

  # processing limits
  limit_documents: -1          

  # weights & biases
  log_to_wandb: true
  wandb:
    project: "BA-DataTrove"
    group: "sliding-window-preprocessing"
    tags: ["sliding-windows", "preprocessing", "t5-precise-windows", "production", "all-data"]

hydra:
  job:
    name: sliding_window_preprocessing
  run:
    dir: outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
  sweep:
    dir: outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num} 